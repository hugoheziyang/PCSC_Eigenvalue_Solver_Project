\doxysection{matrix.\+hpp}
\hypertarget{matrix_8hpp_source}{}\label{matrix_8hpp_source}\index{matrix/matrix.hpp@{matrix/matrix.hpp}}
\mbox{\hyperlink{matrix_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{box_8hpp}{box.hpp}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{box__typed_8hpp}{box\_typed.hpp}}"{}}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <Eigen/Dense>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <Eigen/Sparse>}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <memory>}\ \ \ \ \textcolor{comment}{//\ std::unique\_ptr}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <typeinfo>}\ \ \textcolor{comment}{//\ std::type\_info,\ typeid}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <stdexcept>}\ \textcolor{comment}{//\ std::runtime\_error}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <cstddef>}\ \ \ \textcolor{comment}{//\ std::size\_t}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classMatrix}{Matrix}}\ \{}
\DoxyCodeLine{00031\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00033\ \ \ \ \ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Matrix}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Derived>}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classMatrix_a1a0b399fb1066a97d922d91e9ed2bc3f}{Matrix}}(\textcolor{keyword}{const}\ Eigen::MatrixBase<Derived>\&\ m)}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ :\ isDense\_(true)}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ ,\ scalarType\_(\&typeid(typename\ Derived::Scalar))}
\DoxyCodeLine{00051\ \ \ \ \ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }Scalar\ \ \ =\ \textcolor{keyword}{typename}\ Derived::Scalar;}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }DenseMat\ =\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::Matrix<Scalar,\ Eigen::Dynamic,\ Eigen::Dynamic>}};}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ DenseMat\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{dense}}(\mbox{\hyperlink{classMatrix}{m}});\ \ \textcolor{comment}{//\ Eigen\ converts\ any\ dense\ expression\ to\ a\ dynamic\ matrix}}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ ptr\_\ =\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::make\_unique<BoxTyped<DenseMat>}}>(\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{dense}});}
\DoxyCodeLine{00057\ \ \ \ \ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Scalar,\ \textcolor{keywordtype}{int}\ Options,\ \textcolor{keyword}{typename}\ StorageIndex>}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classMatrix_a5dbde436c14e8376532b0aa85df7c815}{Matrix}}(}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::SparseMatrix<Scalar,\ Options,\ StorageIndex>}}\&\ \mbox{\hyperlink{classMatrix}{m}}}
\DoxyCodeLine{00068\ \ \ \ \ )}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ :\ isDense\_(\mbox{\hyperlink{classMatrix}{false}})}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ ,\ scalarType\_(\&\mbox{\hyperlink{classMatrix}{typeid}}(\mbox{\hyperlink{classMatrix}{Scalar}}))}
\DoxyCodeLine{00071\ \ \ \ \ \{}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }SparseMat\ =\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::SparseMatrix<Scalar,\ Options,\ StorageIndex>}};}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ ptr\_\ =\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::make\_unique<BoxTyped<SparseMat>}}>(\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{m}});}
\DoxyCodeLine{00074\ \ \ \ \ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Scalar>}
\DoxyCodeLine{00085\ \ \ \ \ \mbox{\hyperlink{classMatrix_aa81b58bcc74ece79632881f9c0795ed6}{Matrix}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::vector<Scalar>}}\&\ \mbox{\hyperlink{classMatrix}{data}},\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::size\_t}}\ \mbox{\hyperlink{classMatrix}{rows}},\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::size\_t}}\ \mbox{\hyperlink{classMatrix}{cols}})}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ :\ isDense\_(\mbox{\hyperlink{classMatrix}{true}})}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ ,\ scalarType\_(\&\mbox{\hyperlink{classMatrix}{typeid}}(\mbox{\hyperlink{classMatrix}{Scalar}}))}
\DoxyCodeLine{00088\ \ \ \ \ \{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMatrix}{rows}}\ *\ \mbox{\hyperlink{classMatrix}{cols}}\ !=\ \mbox{\hyperlink{classMatrix}{data}}.size())\ \{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::runtime\_error}}(\textcolor{stringliteral}{"{}Matrix:\ size\ mismatch\ in\ vector\ constructor"{}});}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }DenseMat\ =\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::Matrix<Scalar,\ Eigen::Dynamic,\ Eigen::Dynamic>}};}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ DenseMat\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{mat}}(\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::Index}}\textcolor{keyword}{>}(\mbox{\hyperlink{classMatrix}{rows}}),}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::Index}}\textcolor{keyword}{>}(\mbox{\hyperlink{classMatrix}{cols}}));\ \textcolor{comment}{//\ cast\ from\ std::size\_t\ to\ Eigen::Index\ used\ in\ Eigen::Matrix}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::size\_t}}\ \mbox{\hyperlink{classMatrix}{i}}\ =\ 0;\ \mbox{\hyperlink{classMatrix}{i}}\ <\ \mbox{\hyperlink{classMatrix}{data}}.size();\ ++\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{i}})\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::size\_t}}\ \mbox{\hyperlink{classMatrix}{r}}\ =\ \mbox{\hyperlink{classMatrix}{i}}\ /\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{cols}};}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::size\_t}}\ \mbox{\hyperlink{classMatrix}{c}}\ =\ \mbox{\hyperlink{classMatrix}{i}}\ \%\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{cols}};}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{mat}}(\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::Index}}\textcolor{keyword}{>}(\mbox{\hyperlink{classMatrix}{r}}),}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::Index}}\textcolor{keyword}{>}(\mbox{\hyperlink{classMatrix}{c}}))\ =\ \mbox{\hyperlink{classMatrix}{data}}[\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{i}}];}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ ptr\_\ =\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::make\_unique<BoxTyped<DenseMat>}}>(\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{mat}});}
\DoxyCodeLine{00105\ \ \ \ \ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classMatrix}{Matrix}}\ \mbox{\hyperlink{classMatrix_af0e7f30436f91cb85b22558fcd384f30}{from\_custom}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix}{T}}\&\ \mbox{\hyperlink{classMatrix}{m}})\ \{\ \textcolor{comment}{//\ }}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatrix}{Matrix}}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{M}};}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatrix}{M}}.isDense\_\ =\ \textcolor{keyword}{true};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ treat\ as\ "{}dense-\/like"{}\ by\ default}}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatrix}{M}}.scalarType\_\ =\ \textcolor{keyword}{nullptr};\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ unknown\ scalar\ type\ for\ generic\ T}}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatrix}{M}}.ptr\_\ \ =\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::make\_unique<BoxTyped<T>}}>(\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{m}});}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{M}};}
\DoxyCodeLine{00145\ \ \ \ \ \}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00154\ \ \ \ \ \mbox{\hyperlink{classMatrix_abcf708e864ed3d9db2c3b317c5e529ab}{Matrix}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix}{Matrix}}\&\ \mbox{\hyperlink{classMatrix}{other}})}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ :\ isDense\_(\mbox{\hyperlink{classMatrix}{other}}.isDense\_)}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ ,\ scalarType\_(\mbox{\hyperlink{classMatrix}{other}}.scalarType\_)}
\DoxyCodeLine{00157\ \ \ \ \ \{}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMatrix}{other}}.ptr\_)\ \{}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ ptr\_\ =\ \mbox{\hyperlink{classMatrix}{other}}.ptr\_-\/>clone();\ \ \textcolor{comment}{//\ polymorphic\ deep\ copy}}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00161\ \ \ \ \ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00166\ \ \ \ \ \mbox{\hyperlink{classMatrix}{Matrix}}\&\ \mbox{\hyperlink{classMatrix_a3e40db12ae78b7616ee3f099bb15f13d}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix}{Matrix}}\&\ \mbox{\hyperlink{classMatrix}{other}})\ \{}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{this}\ !=\ \&\mbox{\hyperlink{classMatrix}{other}})\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMatrix}{other}}.ptr\_)\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ptr\_\ =\ \mbox{\hyperlink{classMatrix}{other}}.ptr\_-\/>clone();}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ptr\_.reset();}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ isDense\_\ \ \ =\ \mbox{\hyperlink{classMatrix}{other}}.isDense\_;}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ scalarType\_\ =\ \mbox{\hyperlink{classMatrix}{other}}.scalarType\_;}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00177\ \ \ \ \ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00180\ \ \ \ \ \mbox{\hyperlink{classMatrix_ae55dd75e64afeef9a48ddfa3b333b60b}{\string~Matrix}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMatrix_ae7dc4eb628122570c89094a14dc0021f}{has\_value}}()\ \mbox{\hyperlink{classMatrix}{const}}\ \mbox{\hyperlink{classMatrix}{noexcept}}\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{bool}\textcolor{keyword}{>}(ptr\_);}
\DoxyCodeLine{00187\ \ \ \ \ \}}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::type\_info}}\&\ \mbox{\hyperlink{classMatrix_aed73db9e9a9fbf6c9fd8bd82238e8683}{type}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!ptr\_)\ \{}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::runtime\_error}}(\textcolor{stringliteral}{"{}Matrix::type()\ called\ on\ empty\ Matrix"{}});}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ptr\_-\/>type();}
\DoxyCodeLine{00199\ \ \ \ \ \}}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00207\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::type\_info}}\&\ \mbox{\hyperlink{classMatrix_a336eeb12b216965b1030c5f0de2f418e}{scalar\_type}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!scalarType\_)\ \{}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::runtime\_error}}(\textcolor{stringliteral}{"{}Matrix::scalar\_type()\ called\ on\ empty\ Matrix"{}});}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *scalarType\_;}
\DoxyCodeLine{00212\ \ \ \ \ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMatrix_a75e07c6e7201be7839b96eec1b719315}{isDense}}()\ \mbox{\hyperlink{classMatrix}{const}}\ \mbox{\hyperlink{classMatrix}{noexcept}}\ \{\ \textcolor{keywordflow}{return}\ isDense\_;\ \}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00247\ \ \ \ \ \mbox{\hyperlink{classMatrix}{T}}\&\ \mbox{\hyperlink{classMatrix_a97b8901a453cbdc94fc3fd4cb3e9d4dd}{cast}}()\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!ptr\_)\ \{}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::runtime\_error}}(\textcolor{stringliteral}{"{}Matrix::cast()\ called\ on\ empty\ Matrix"{}});}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ptr\_-\/>type()\ !=\ \textcolor{keyword}{typeid}(\mbox{\hyperlink{classMatrix}{T}}))\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::bad\_cast}}\{\};}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ \mbox{\hyperlink{classMatrix}{typed}}\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classMatrix}{BoxTyped<T>}}*\textcolor{keyword}{>}(ptr\_.get());\ \textcolor{comment}{//\ get()\ here\ is\ method\ of\ in-\/built\ unique\_ptr,\ ptr\_.get()\ returns\ a\ raw\ pointer\ to\ Box}}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMatrix}{typed}}-\/>get();\ \textcolor{comment}{//\ get()\ here\ is\ method\ of\ BoxTyped<T>}}
\DoxyCodeLine{00258\ \ \ \ \ \}}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix}{T}}\&\ \mbox{\hyperlink{classMatrix_a58d5c0f61ca59f27360f773c95961a57}{cast}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!ptr\_)\ \{}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::runtime\_error}}(\textcolor{stringliteral}{"{}Matrix::cast()\ called\ on\ empty\ Matrix"{}});}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ptr\_-\/>type()\ !=\ \textcolor{keyword}{typeid}(\mbox{\hyperlink{classMatrix}{T}}))\ \{}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::bad\_cast}}\{\};}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ \mbox{\hyperlink{classMatrix}{typed}}\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{classMatrix}{BoxTyped<T>}}*\textcolor{keyword}{>}(ptr\_.get());}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMatrix}{typed}}-\/>get();}
\DoxyCodeLine{00284\ \ \ \ \ \}}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00288\ \ \ \ \ \textcolor{keywordtype}{bool}\ isDense\_\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::type\_info}}*\ scalarType\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00294\ \ \ \ \ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::unique\_ptr<Box>}}\ ptr\_;}
\DoxyCodeLine{00295\ \};}

\end{DoxyCode}
