\doxysection{matrix.\+hpp}
\hypertarget{matrix_8hpp_source}{}\label{matrix_8hpp_source}\index{matrix/matrix.hpp@{matrix/matrix.hpp}}
\mbox{\hyperlink{matrix_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{box_8hpp}{box.hpp}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{box__typed_8hpp}{box\_typed.hpp}}"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}../core/types.hpp"{}}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <Eigen/Dense>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <Eigen/Sparse>}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <memory>}\ \ \ \ \textcolor{comment}{//\ std::unique\_ptr}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <typeinfo>}\ \ \textcolor{comment}{//\ std::type\_info,\ typeid}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <stdexcept>}\ \textcolor{comment}{//\ std::runtime\_error}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <cstddef>}\ \ \ \textcolor{comment}{//\ std::size\_t}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classMatrix}{Matrix}}\ \{}
\DoxyCodeLine{00032\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Matrix}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Derived>}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keyword}{requires}\ ScalarConcept<typename\ Derived::Scalar>}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classMatrix_ab0f3e6ea82c6fb02be3a02f6d5c6f26d}{Matrix}}(\textcolor{keyword}{const}\ Eigen::MatrixBase<Derived>\&\ m)}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ :\ isDense\_(true)}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ ,\ scalarType\_(\&typeid(typename\ Derived::Scalar))}
\DoxyCodeLine{00053\ \ \ \ \ \{}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }Scalar\ \ \ =\ \textcolor{keyword}{typename}\ Derived::Scalar;}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }DenseMat\ =\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::Matrix<Scalar,\ Eigen::Dynamic,\ Eigen::Dynamic>}};}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ DenseMat\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{dense}}(\mbox{\hyperlink{classMatrix}{m}});\ \ \textcolor{comment}{//\ Eigen\ converts\ any\ dense\ expression\ to\ a\ dynamic\ matrix}}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ ptr\_\ =\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::make\_unique<BoxTyped<DenseMat>}}>(\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{dense}});}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{template}\ <ScalarConcept\ Scalar,\ \textcolor{keywordtype}{int}\ Options,\ \textcolor{keyword}{typename}\ StorageIndex>}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classMatrix_a5dbde436c14e8376532b0aa85df7c815}{Matrix}}(}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::SparseMatrix<Scalar,\ Options,\ StorageIndex>}}\&\ \mbox{\hyperlink{classMatrix}{m}}}
\DoxyCodeLine{00075\ \ \ \ \ )}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ :\ isDense\_(\mbox{\hyperlink{classMatrix}{false}})}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ ,\ scalarType\_(\&\mbox{\hyperlink{classMatrix}{typeid}}(Scalar))}
\DoxyCodeLine{00078\ \ \ \ \ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classMatrix}{CanonicalSparse}}\ =\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::SparseMatrix<Scalar>}};\ \textcolor{comment}{//\ Options\ =\ 0,\ StorageIndex\ =\ int}}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatrix}{CanonicalSparse}}\ \mbox{\hyperlink{classMatrix}{S}}\ =\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{m}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Eigen\ handles\ conversion}}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ ptr\_\ =\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::make\_unique<BoxTyped<CanonicalSparse>}}>(\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{S}});}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keyword}{template}\ <ScalarConcept\ Scalar>}
\DoxyCodeLine{00093\ \ \ \ \ \mbox{\hyperlink{classMatrix_aa81b58bcc74ece79632881f9c0795ed6}{Matrix}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::vector<Scalar>}}\&\ \mbox{\hyperlink{classMatrix}{data}},\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::size\_t}}\ \mbox{\hyperlink{classMatrix}{rows}},\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::size\_t}}\ \mbox{\hyperlink{classMatrix}{cols}})}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ :\ isDense\_(\mbox{\hyperlink{classMatrix}{true}})}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ ,\ scalarType\_(\&\mbox{\hyperlink{classMatrix}{typeid}}(Scalar))}
\DoxyCodeLine{00096\ \ \ \ \ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMatrix}{rows}}\ *\ \mbox{\hyperlink{classMatrix}{cols}}\ !=\ \mbox{\hyperlink{classMatrix}{data}}.size())\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::runtime\_error}}(\textcolor{stringliteral}{"{}Matrix:\ size\ mismatch\ in\ vector\ constructor"{}});}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }DenseMat\ =\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::Matrix<Scalar,\ Eigen::Dynamic,\ Eigen::Dynamic>}};}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ DenseMat\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{mat}}(\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::Index}}\textcolor{keyword}{>}(\mbox{\hyperlink{classMatrix}{rows}}),}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::Index}}\textcolor{keyword}{>}(\mbox{\hyperlink{classMatrix}{cols}}));\ \textcolor{comment}{//\ cast\ from\ std::size\_t\ to\ Eigen::Index\ used\ in\ Eigen::Matrix}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::size\_t}}\ \mbox{\hyperlink{classMatrix}{i}}\ =\ 0;\ \mbox{\hyperlink{classMatrix}{i}}\ <\ \mbox{\hyperlink{classMatrix}{data}}.size();\ ++\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{i}})\ \{}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::size\_t}}\ \mbox{\hyperlink{classMatrix}{r}}\ =\ \mbox{\hyperlink{classMatrix}{i}}\ /\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{cols}};}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::size\_t}}\ \mbox{\hyperlink{classMatrix}{c}}\ =\ \mbox{\hyperlink{classMatrix}{i}}\ \%\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{cols}};}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{mat}}(\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::Index}}\textcolor{keyword}{>}(\mbox{\hyperlink{classMatrix}{r}}),}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{Eigen::Index}}\textcolor{keyword}{>}(\mbox{\hyperlink{classMatrix}{c}}))\ =\ \mbox{\hyperlink{classMatrix}{data}}[\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{i}}];}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ ptr\_\ =\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::make\_unique<BoxTyped<DenseMat>}}>(\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{mat}});}
\DoxyCodeLine{00113\ \ \ \ \ \}}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classMatrix}{Matrix}}\ \mbox{\hyperlink{classMatrix_af0e7f30436f91cb85b22558fcd384f30}{from\_custom}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix}{T}}\&\ \mbox{\hyperlink{classMatrix}{m}})\ \{\ \textcolor{comment}{//\ }}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatrix}{Matrix}}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{M}};}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatrix}{M}}.isDense\_\ =\ \textcolor{keyword}{true};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ treat\ as\ "{}dense-\/like"{}\ by\ default}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatrix}{M}}.scalarType\_\ =\ \textcolor{keyword}{nullptr};\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ unknown\ scalar\ type\ for\ generic\ T}}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatrix}{M}}.ptr\_\ \ =\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::make\_unique<BoxTyped<T>}}>(\mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{m}});}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{M}};}
\DoxyCodeLine{00153\ \ \ \ \ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00162\ \ \ \ \ \mbox{\hyperlink{classMatrix_abcf708e864ed3d9db2c3b317c5e529ab}{Matrix}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix}{Matrix}}\&\ \mbox{\hyperlink{classMatrix}{other}})}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ :\ isDense\_(\mbox{\hyperlink{classMatrix}{other}}.isDense\_)}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ ,\ scalarType\_(\mbox{\hyperlink{classMatrix}{other}}.scalarType\_)}
\DoxyCodeLine{00165\ \ \ \ \ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMatrix}{other}}.ptr\_)\ \{}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ ptr\_\ =\ \mbox{\hyperlink{classMatrix}{other}}.ptr\_-\/>clone();\ \ \textcolor{comment}{//\ polymorphic\ deep\ copy}}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00169\ \ \ \ \ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00174\ \ \ \ \ \mbox{\hyperlink{classMatrix}{Matrix}}\&\ \mbox{\hyperlink{classMatrix_a3e40db12ae78b7616ee3f099bb15f13d}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix}{Matrix}}\&\ \mbox{\hyperlink{classMatrix}{other}})\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{this}\ !=\ \&\mbox{\hyperlink{classMatrix}{other}})\ \{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classMatrix}{other}}.ptr\_)\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ptr\_\ =\ \mbox{\hyperlink{classMatrix}{other}}.ptr\_-\/>clone();}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ptr\_.reset();}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ isDense\_\ \ \ =\ \mbox{\hyperlink{classMatrix}{other}}.isDense\_;}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ scalarType\_\ =\ \mbox{\hyperlink{classMatrix}{other}}.scalarType\_;}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00185\ \ \ \ \ \}}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00188\ \ \ \ \ \mbox{\hyperlink{classMatrix_ae55dd75e64afeef9a48ddfa3b333b60b}{\string~Matrix}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMatrix_ae7dc4eb628122570c89094a14dc0021f}{has\_value}}()\ \mbox{\hyperlink{classMatrix}{const}}\ \mbox{\hyperlink{classMatrix}{noexcept}}\ \{}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{bool}\textcolor{keyword}{>}(ptr\_);}
\DoxyCodeLine{00195\ \ \ \ \ \}}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::type\_info}}\&\ \mbox{\hyperlink{classMatrix_aed73db9e9a9fbf6c9fd8bd82238e8683}{type}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!ptr\_)\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::runtime\_error}}(\textcolor{stringliteral}{"{}Matrix::type()\ called\ on\ empty\ Matrix"{}});}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ptr\_-\/>type();}
\DoxyCodeLine{00207\ \ \ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::type\_info}}\&\ \mbox{\hyperlink{classMatrix_a336eeb12b216965b1030c5f0de2f418e}{scalar\_type}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!scalarType\_)\ \{}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::runtime\_error}}(\textcolor{stringliteral}{"{}Matrix::scalar\_type()\ called\ on\ empty\ Matrix"{}});}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *scalarType\_;}
\DoxyCodeLine{00220\ \ \ \ \ \}}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMatrix_a75e07c6e7201be7839b96eec1b719315}{isDense}}()\ \mbox{\hyperlink{classMatrix}{const}}\ \mbox{\hyperlink{classMatrix}{noexcept}}\ \{\ \textcolor{keywordflow}{return}\ isDense\_;\ \}}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00254\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00255\ \ \ \ \ \mbox{\hyperlink{classMatrix}{T}}\&\ \mbox{\hyperlink{classMatrix_a97b8901a453cbdc94fc3fd4cb3e9d4dd}{cast}}()\ \{}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!ptr\_)\ \{}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::runtime\_error}}(\textcolor{stringliteral}{"{}Matrix::cast()\ called\ on\ empty\ Matrix"{}});}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ptr\_-\/>type()\ !=\ \textcolor{keyword}{typeid}(\mbox{\hyperlink{classMatrix}{T}}))\ \{}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::bad\_cast}}\{\};}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ \mbox{\hyperlink{classMatrix}{typed}}\ =\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classMatrix}{BoxTyped<T>}}*\textcolor{keyword}{>}(ptr\_.get());\ \textcolor{comment}{//\ get()\ here\ is\ method\ of\ in-\/built\ unique\_ptr,\ ptr\_.get()\ returns\ a\ raw\ pointer\ to\ Box}}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMatrix}{typed}}-\/>get();\ \textcolor{comment}{//\ get()\ here\ is\ method\ of\ BoxTyped<T>}}
\DoxyCodeLine{00266\ \ \ \ \ \}}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix}{T}}\&\ \mbox{\hyperlink{classMatrix_a58d5c0f61ca59f27360f773c95961a57}{cast}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!ptr\_)\ \{}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::runtime\_error}}(\textcolor{stringliteral}{"{}Matrix::cast()\ called\ on\ empty\ Matrix"{}});}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ptr\_-\/>type()\ !=\ \textcolor{keyword}{typeid}(\mbox{\hyperlink{classMatrix}{T}}))\ \{}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::bad\_cast}}\{\};}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ \mbox{\hyperlink{classMatrix}{typed}}\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{classMatrix}{BoxTyped<T>}}*\textcolor{keyword}{>}(ptr\_.get());}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMatrix}{typed}}-\/>get();}
\DoxyCodeLine{00292\ \ \ \ \ \}}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keywordtype}{bool}\ isDense\_\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::type\_info}}*\ scalarType\_\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00302\ \ \ \ \ \mbox{\hyperlink{classMatrix_a12d35ef1824cd847868a8703035b0d5d}{std::unique\_ptr<Box>}}\ ptr\_;}
\DoxyCodeLine{00303\ \};}

\end{DoxyCode}
